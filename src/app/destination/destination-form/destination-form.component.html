<div class="modal fade" id="addDestinationModal" tabindex="-1" aria-labelledby="addDestinationModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      
      <div class="modal-header">
        <h5 class="modal-title" id="addDestinationModalLabel">{{ modalTitle }}</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <div class="modal-body">
        <form #destinationForm="ngForm" (ngSubmit)="onSubmit(destinationForm)">
          
          <!-- Name Field -->
          <div class="mb-3">
            <label for="name" class="form-label">
              Destination Name <span class="text-danger">*</span>
            </label>
            <input type="text" 
                   class="form-control" 
                   id="name" 
                   name="name"
                   [(ngModel)]="name"
                   #nameField="ngModel"
                   required
                   minlength="2"
                   placeholder="e.g., Maldives, Bali, Dubai"
                   [class.is-invalid]="nameField.invalid && (nameField.dirty || nameField.touched)">
            <div class="invalid-feedback" *ngIf="nameField.invalid && (nameField.dirty || nameField.touched)">
              <div *ngIf="nameField.errors?.['required']">Destination name is required</div>
              <div *ngIf="nameField.errors?.['minlength']">Name must be at least 2 characters</div>
            </div>
          </div>
          
          <!-- Description Field -->
          <div class="mb-3">
            <label for="city" class="form-label">
              Description <span class="text-danger">*</span>
            </label>
            <textarea class="form-control" 
                      id="city" 
                      name="city"
                      [(ngModel)]="city"
                      #cityField="ngModel"
                      required
                      minlength="20"
                      rows="4" 
                      placeholder="Describe the destination, activities, and what's included..."
                      [class.is-invalid]="cityField.invalid && (cityField.dirty || cityField.touched)"></textarea>
            <div class="invalid-feedback" *ngIf="cityField.invalid && (cityField.dirty || cityField.touched)">
              <div *ngIf="cityField.errors?.['required']">Description is required</div>
              <div *ngIf="cityField.errors?.['minlength']">Description must be at least 20 characters</div>
            </div>
          </div>

          <!-- Image Upload Field -->
          <div class="mb-3">
            <label for="imageUrl" class="form-label">
              Image Upload 
              <span class="text-danger" *ngIf="!isEditMode">*</span>
              <span class="text-muted" *ngIf="isEditMode">(Optional - leave empty to keep current image)</span>
            </label>
            <input type="file" 
                   class="form-control" 
                   id="imageUrl" 
                   name="imageUrl"
                   #imageField
                   accept="image/*"
                   (change)="onFileSelect($event)"
                   [class.is-invalid]="!imageUrl && !isEditMode && destinationForm.submitted">
            <div class="invalid-feedback" *ngIf="!imageUrl && !isEditMode && destinationForm.submitted">
              <div>Image is required</div>
            </div>
            <div class="form-text">
              <small class="text-muted">
                <i class="bi bi-info-circle me-1"></i>
                Use high-quality images (recommended: 400x300px or similar ratio, max 5MB)
              </small>
            </div>
          </div>

          <!-- Image Preview -->
          <div class="mb-3" *ngIf="imageUrl">
            <label class="form-label">Image Preview</label>
            <div class="border rounded p-2 bg-light">
              <img [src]="imageUrl" 
                   [alt]="name || 'Destination preview'"
                   class="img-thumbnail d-block mx-auto"
                   style="max-height: 200px; max-width: 100%; object-fit: contain;"
                   (error)="onImageError($event)">
            </div>
          </div>

          <!-- Loading Spinner -->
          <div *ngIf="isLoading" class="text-center mb-3">
            <div class="spinner-border text-primary" role="status">
              <span class="visually-hidden">Loading...</span>
            </div>
            <p class="mt-2 text-muted">{{ isEditMode ? 'Updating' : 'Adding' }} destination...</p>
          </div>
        </form>
      </div>

      <div class="modal-footer">
        <button type="button" 
                class="btn btn-secondary rounded-pill" 
                data-bs-dismiss="modal"
                [disabled]="isLoading">
          Cancel
        </button>
        <button type="button" 
                class="btn btn-primary rounded-pill" 
                (click)="onSubmit(destinationForm)"
                [disabled]="isLoading">
          <span *ngIf="isLoading" class="spinner-border spinner-border-sm me-2" role="status"></span>
          <i *ngIf="!isLoading" class="bi" [ngClass]="isEditMode ? 'bi-check-circle' : 'bi-plus-circle'" class="me-1"></i>
          {{ submitButtonText }}
        </button>
      </div>

    </div>
  </div>
</div>